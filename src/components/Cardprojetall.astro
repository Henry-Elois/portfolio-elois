---
import { POCKETBASE_URL } from "../../utils/pb";

interface Props {
  projet: any;
  index?: number;
}

const { projet, index = 0 } = Astro.props;

const imageFile = projet?.image_card;
const collectionId = projet?.collectionId ?? "projets";
const imageUrl = imageFile
  ? `${POCKETBASE_URL}/api/files/${collectionId}/${projet.id}/${imageFile}`
  : "/placeholder-project.png";

const titre = projet?.titre ?? "Projet";
const categorie = projet?.categorie ?? "Projet";
---

<div
  class="border-2 border-black rounded-3xl p-4 transition-colors duration-300 hover:border-primary"
>
  <a href={`/projets/${projet?.id}`} class="card-projet group block">
    <figure
      class="relative w-full aspect-[4/3] overflow-hidden rounded-2xl bg-base-200 mb-6"
    >
      <img
        src={imageUrl}
        alt={titre}
        class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"
      />
    </figure>

    <div class="space-y-2">
      <p class="text-sm text-gray-500 font-medium">
        {categorie}
      </p>

      <h4
        class="text-2xl md:text-2xl font-bold leading-tight group-hover:text-accent transition-colors"
      >
        {titre}
      </h4>

      <div
        class="flex items-center gap-2 text-sm font-semibold border-b-2 border-black pb-1 w-fit group-hover:border-accent group-hover:text-accent transition-colors"
      >
        <span>Voir le projet</span>
        <svg
          class="w-4 h-4"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
        </svg>
      </div>
    </div>
  </a>
</div>
<style>
  .card-projet {
    transition: all 0.3s ease;
  }
</style>
