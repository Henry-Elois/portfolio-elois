---
import "../style/global.css";
import Fleur from "../components/Fleur.astro";

interface Props {
  title: string;
  description?: string;
  image?: string;
}

const {
  title,
  description = "Portfolio d'Eloïs Henry - Communicante et UX designer spécialisée en création multimédia et projets interactifs.",
  image = "/og-image.jpg",
} = Astro.props;

const currentYear = new Date().getFullYear();
const currentPath = Astro.url.pathname;
---

<!doctype html>
<html lang="fr" data-theme="mytheme">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content={Astro.generator} />

    <title>{title}</title>
    <meta name="description" content={description} />
    <meta name="author" content="Eloïs Henry" />

    <meta property="og:type" content="website" />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={image} />
    <meta property="og:locale" content="fr_FR" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={image} />

    <link rel="icon" type="image/svg+xml" href="/fleur.svg" />

    <script
      type="application/ld+json"
      set:html={JSON.stringify({
        "@context": "https://schema.org",
        "@type": "Person",
        name: "Eloïs Henry",
        jobTitle: "Communicante et UX Designer",
        description:
          "Étudiante en 2e année de BUT MMI, spécialisée en création multimédia et projets interactifs",
        url: "https://elois-henry.fr",
        sameAs: [
          "https://linkedin.com/in/elois-henry",
          "https://instagram.com/elois_henry",
          "https://behance.net/eloishenry",
        ],
      })}
    />
  </head>

  <body class="bg-base-100 text-neutral leading-relaxed">
    <header
      class="fixed top-3 md:top-6 left-1/2 -translate-x-1/2 z-50 w-[min(96%,1200px)]"
    >
      <div
        class="bg-primary text-white rounded-full shadow-lg px-4 md:px-6 py-3 md:py-4 flex items-center justify-between"
      >
        <!-- Menu mobile hamburger -->
        <button
          id="mobile-menu-toggle"
          class="md:hidden flex flex-col gap-1.5 w-8 h-8 justify-center items-center"
          aria-label="Menu"
        >
          <span class="w-6 h-0.5 bg-white rounded"></span>
          <span class="w-6 h-0.5 bg-white rounded"></span>
          <span class="w-6 h-0.5 bg-white rounded"></span>
        </button>

        <!-- Navigation desktop -->
        <div class="hidden md:flex items-center gap-6 lg:gap-10 pl-2">
          <a
            href="/apropos"
            class="font-bold text-base lg:text-lg hover:opacity-90"
            >Qui suis-je ?</a
          >
          <div class="relative">
            <a
              href="/projets"
              class="font-bold text-base lg:text-lg flex items-center gap-2"
              >Mes projets
            </a>
          </div>
        </div>

        <!-- Logo central -->
        <div class="flex-1 md:flex-initial flex justify-center">
          <a href="/" class="block hover:opacity-90">
            <div
              class="w-12 h-12 md:w-16 md:h-16 rounded-full flex items-center justify-center"
            >
              <Fleur petal="#FFD700" centre-fleur="#FFFFFF" />
            </div>
          </a>
        </div>

        <!-- Bouton contact -->
        <div class="hidden md:flex items-center gap-4 pr-2">
          <a
            href="/contact"
            class="bg-base-100 text-primary px-4 lg:px-6 py-2 rounded-full font-bold shadow text-sm lg:text-base"
            >Me contacter</a
          >
        </div>

        <!-- Placeholder pour équilibrer sur mobile -->
        <div class="md:hidden w-8"></div>
      </div>

      <!-- Menu mobile déroulant -->
      <div
        id="mobile-menu"
        class="hidden md:hidden mt-3 bg-primary text-white rounded-3xl shadow-lg overflow-hidden"
      >
        <nav class="flex flex-col">
          <a
            href="/apropos"
            class="px-6 py-4 font-bold hover:bg-white/10 transition-colors border-b border-white/20"
            >Qui suis-je ?</a
          >
          <a
            href="/projets"
            class="px-6 py-4 font-bold hover:bg-white/10 transition-colors border-b border-white/20"
            >Mes projets</a
          >
          <a
            href="/contact"
            class="px-6 py-4 font-bold hover:bg-white/10 transition-colors"
            >Me contacter</a
          >
        </nav>
      </div>
    </header>

    <div class="h-20 md:h-24"></div>

    <main class="min-h-screen pt-15">
      <slot />
    </main>

    <footer class="mt-12 md:mt-20">
      <section class=" px-6 bg-gray-900 text-white">
        <div class="max-w-7xl mx-auto">
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
            <div>
              <h2
                class="text-4xl md:text-6xl font-black mb-6 mt-4 leading-tight"
              >
                Un projet<br />en tête ?
              </h2>
              <p class="text-xl text-gray-300 mb-10">
                N'hésitez pas à me contacter pour en discuter !
              </p>

              <div class="flex flex-wrap gap-4">
                <a
                  href="/contact"
                  class="inline-flex items-center gap-3 bg-primary text-white px-8 py-4 font-bold uppercase tracking-wide hover:bg-primary/90 transition-all duration-300"
                >
                  Me contacter
                  <svg
                    class="w-5 h-5"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
                  </svg>
                </a>

                <a
                  href="/cv_elois-henry.pdf"
                  download
                  class="inline-flex items-center gap-3 bg-white text-black px-8 py-4 font-bold uppercase tracking-wide hover:bg-gray-100 transition-all duration-300"
                >
                  Télécharger mon CV
                  <svg
                    class="w-5 h-5"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                    ></path>
                  </svg>
                </a>
              </div>
            </div>

            <div class="border-l-2 border-white/20 pl-12">
              <h3 class="text-3xl font-black mb-4">Me suivre</h3>
              <p class="text-lg text-gray-300 mb-8">
                Retrouvez-moi sur les réseaux
              </p>

              <div class="flex gap-4">
                <a
                  href="https://www.behance.net/eloshenry1"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="w-14 h-14 bg-white/10 backdrop-blur-sm border border-white/20 rounded-full flex items-center justify-center hover:bg-primary hover:border-primary transition-all duration-300"
                  aria-label="Behance"
                >
                  <img src="/mage_behance.svg" alt="Behance" class="w-7 h-7" />
                </a>

                <a
                  href="https://www.linkedin.com/in/eloïs-henry-9371582b2"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="w-14 h-14 bg-white/10 backdrop-blur-sm border border-white/20 rounded-full flex items-center justify-center hover:bg-primary hover:border-primary transition-all duration-300"
                  aria-label="LinkedIn"
                >
                  <img src="/mdi_linkedin.svg" alt="LinkedIn" class="w-7 h-7" />
                </a>

                <a
                  href="https://instagram.com/elois_hry"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="w-14 h-14 bg-white/10 backdrop-blur-sm border border-white/20 rounded-full flex items-center justify-center hover:bg-primary hover:border-primary transition-all duration-300"
                  aria-label="Instagram"
                >
                  <img
                    src="/ri_instagram-fill.svg"
                    alt="Instagram"
                    class="w-7 h-7"
                  />
                </a>
              </div>
            </div>
          </div>
        </div>
        <div class="border-t border-gray-200 mt-4 md:mt-24 md:pt-8 mr-64 ml-64">
          <a
            href="/mentionslegales"
            class="flex items-center justify-center gap-2 mb-4"
          >
            <p
              class="text-center text-xs md:text-sm opacity-80 hover:underline"
            >
              © {currentYear} - Eloïs Henry - Tous droits réservés.
            </p>
          </a>
        </div>
      </section>
    </footer>

    <script>
      const toggleBtn = document.getElementById("mobile-menu-toggle");
      const mobileMenu = document.getElementById("mobile-menu");

      toggleBtn?.addEventListener("click", () => {
        mobileMenu?.classList.toggle("hidden");
      });

      const mobileLinks = mobileMenu?.querySelectorAll("a");
      mobileLinks?.forEach((link) => {
        link.addEventListener("click", () => {
          mobileMenu?.classList.add("hidden");
        });
      });

      const observerOptions = {
        threshold: 0.1,
        rootMargin: "0px 0px -100px 0px",
      };

      const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add("animate-fade-in-up");
            observer.unobserve(entry.target);
          }
        });
      }, observerOptions);

      document.addEventListener("DOMContentLoaded", () => {
        document.querySelectorAll(".animate-on-scroll").forEach((el) => {
          observer.observe(el);
        });
      });

      document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
        anchor.addEventListener("click", function (e) {
          const element = e.currentTarget as HTMLAnchorElement;
          const href = element.getAttribute("href");
          if (href && href !== "#" && href !== "") {
            e.preventDefault();
            const target = document.querySelector(href) as HTMLElement;
            if (target) {
              const headerOffset = 80; // Hauteur du header fixe
              const elementPosition = target.getBoundingClientRect().top;
              const offsetPosition =
                elementPosition + window.pageYOffset - headerOffset;

              window.scrollTo({
                top: offsetPosition,
                behavior: "smooth",
              });
            }
          }
        });
      });
    </script>
  </body>
</html>
