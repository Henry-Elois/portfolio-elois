---
import Layout from "../layouts/Layout.astro";
import Fleur from "../components/Fleur.astro";
import Cardprojet from "../components/Cardprojet.astro";
import LogicielCard from "../components/Cardlogiciel.astro";
import { POCKETBASE_URL } from "../../utils/pb";

let projets = [];
let logiciels = [];

try {
  const [projetsRes, logicielsRes] = await Promise.all([
    fetch(
      `${POCKETBASE_URL}/api/collections/projets/records?perPage=3&sort=-created`
    ),
    fetch(
      `${POCKETBASE_URL}/api/collections/logiciels/records?perPage=3&sort=-created`
    ),
  ]);
  if (projetsRes.ok) {
    const data = await projetsRes.json();
    projets = data.items || [];
  }
  if (logicielsRes.ok) {
    const data = await logicielsRes.json();
    logiciels = data.items || [];
  }
} catch (err) {
  console.error("Erreur fetch:", err);
}
---

<Layout title="Accueil - Eloïs Henry">
  <section
    class="min-h-screen flex flex-col items-center justify-center py-20 px-4"
  >
    <img
      src="/3D_no.png"
      alt="ELOÏS HENRY titre 3D"
      class="w-full max-w-3xl h-auto animate-float-3d select-none"
    />

    <div class="text-center mt-20 px-4">
      <p class="subtitle-script text-5xl md:text-6xl mb-12 text-gray-800">
        Filmer. <span class="text-gray-900">Créer.</span>
        <span class="text-primary">Partager.</span>
      </p>

      <a
        href="/#qui-suis-je"
        class="inline-block p-4 rounded-full border-2 border-black hover:bg-black hover:border-black transition-all duration-300 group"
      >
        <svg
          class="w-6 h-6 group-hover:text-white transition-colors"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
        </svg>
      </a>
    </div>
  </section>

  <section id="qui-suis-je" class="py-20 px-6 bg-base-100">
    <div class="max-w-7xl mx-auto">
      <div class="mb-16">
        <h2 class="text-5xl md:text-7xl font-black mb-6 mt-4 leading-tight">
          Communicante & <br /><span class="text-primary">UX Designer</span>
        </h2>
        <div
          class="flex items-center gap-6 text-base font-medium text-gray-600"
        >
          <span>18 ans</span>
          <Fleur size="32" />
          <span>Étudiante en 2ᵉ année BUT MMI</span>
        </div>
      </div>

      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 items-center">
        <div class="relative flex justify-center">
          <div
            class="absolute inset-0 bg-primary/12 rounded-full blur-3xl scale-110"
          >
          </div>
          <div
            class="absolute inset-0 bg-secondary/5 rounded-full blur-2xl scale-105 translate-x-4 translate-y-4"
          >
          </div>
          <img
            src="/photoaccueil.png"
            alt="Eloïs Henry"
            class="relative w-full max-w-md h-auto rounded-3xl z-10"
          />
        </div>

        <div class="space-y-6">
          <h3 class="text-4xl md:text-5xl font-black leading-tight">
            Hello, moi c'est <span class="text-primary">Eloïs</span>
          </h3>

          <p class="text-lg text-gray-700 leading-relaxed">
            Actuellement étudiante en 2ᵉ année de <strong>BUT MMI</strong> (Métiers
            du Multimédia et de l'Internet), je suis passionnée par la création de
            contenu, le design d'expérience et la communication visuelle.
          </p>

          <div class="flex flex-wrap gap-3">
            <span
              class="px-4 py-2 bg-base-200 rounded-full text-sm font-semibold"
              >Design UI/UX</span
            >
            <span
              class="px-4 py-2 bg-base-200 rounded-full text-sm font-semibold"
              >Création de contenu</span
            >
            <span
              class="px-4 py-2 bg-base-200 rounded-full text-sm font-semibold"
              >Communication visuelle</span
            >
          </div>

          <a
            href="/apropos"
            class="inline-flex items-center gap-3 bg-black text-white px-8 py-4 font-bold uppercase tracking-wider hover:bg-primary transition-all duration-300 rounded-md"
          >
            En savoir plus
            <svg
              class="w-5 h-5"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
            </svg>
          </a>
        </div>
      </div>
    </div>
  </section>

  <section class="py-20 px-6 bg-gradient-to-br from-primary/10 to-white">
    <div class="max-w-7xl mx-auto">
      <div class="mb-16">
        <h3 class="text-5xl md:text-6xl font-black mb-4 mt-4">
          Mes <span class="text-primary">Compétences</span>
        </h3>
        <p class="text-xl text-gray-600 max-w-2xl">
          Une sélection des outils que je maîtrise pour donner vie à vos projets
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-16">
        {
          logiciels.map((logiciel: any, index: number) => (
            <LogicielCard
              nom={logiciel.nom_logiciel || "Logiciel"}
              icone={
                logiciel.icone
                  ? `${POCKETBASE_URL}/api/files/${logiciel.collectionId}/${logiciel.id}/${logiciel.icone}`
                  : undefined
              }
              description={logiciel.description || ""}
              nom_logiciel={logiciel.nom_logiciel}
              couleurBordure={["primary", "accent", "secondary"][index % 3]}
            />
          ))
        }
      </div>

      <div class="text-center">
        <a
          href="/apropos"
          class="inline-flex items-center gap-3 bg-black text-white px-10 py-4 font-bold uppercase tracking-wider hover:bg-primary transition-all duration-300 rounded-md"
        >
          Voir toutes mes compétences
          <svg
            class="w-5 h-5"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
          </svg>
        </a>
      </div>
    </div>
  </section>

  <section class="py-20 px-6 bg-base-100">
    <div class="max-w-7xl mx-auto">
      <div
        class="flex flex-col md:flex-row items-start md:items-end justify-between mb-16 gap-6"
      >
        <div>
          <h2 class="text-5xl md:text-7xl font-black mb-4 mt-4">
            Mes <span class="text-primary">Projets</span>
          </h2>
          <p class="text-xl text-gray-600">
            Une sélection de mes réalisations récentes
          </p>
        </div>

        <a
          href="/projets"
          class="inline-flex items-center gap-2 px-6 py-3 border-2 border-black hover:bg-black hover:text-white font-bold uppercase tracking-wide transition-all duration-300 rounded-md"
        >
          Tous les projets
          <svg
            class="w-5 h-5"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
          </svg>
        </a>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        {projets.map((p: any) => <Cardprojet projet={p} />)}
      </div>
    </div>
  </section>

  
</Layout>
